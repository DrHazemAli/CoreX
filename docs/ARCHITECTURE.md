# CoreX Architecture Documentation

> **Version**: 1.0.0  
> **Last Updated**: January 2026  
> **Status**: Production-Ready Starter Template

## Table of Contents

1. [Overview](#overview)
2. [System Architecture](#system-architecture)
3. [Design Philosophy](#design-philosophy)
4. [Request Flow](#request-flow)
5. [Data Flow](#data-flow)
6. [Architectural Layers](#architectural-layers)
7. [Module Dependency Graph](#module-dependency-graph)
8. [Feature Flag System](#feature-flag-system)
9. [Directory Structure](#directory-structure)
10. [Design Patterns](#design-patterns)
11. [DO's and DON'Ts](#dos-and-donts)

---

## Overview

CoreX is a **production-grade starter template** for building modern web applications with Next.js. It provides the architectural foundation with **all infrastructure in place**, allowing you to focus on business logic.

### What's Included (Ready to Use)

| Component          | Status      | Description                      |
| ------------------ | ----------- | -------------------------------- |
| **Authentication** | âœ… Complete | Supabase Auth (email, OAuth)     |
| **Authorization**  | âœ… Complete | Role-based + Permission-based    |
| **API Routes**     | âœ… Template | Sample route with best practices |
| **Job Queue**      | âœ… Complete | Laravel-inspired background jobs |
| **Caching**        | âœ… Complete | Redis/Memory cache layer         |
| **Rate Limiting**  | âœ… Complete | Configurable rate limits         |
| **UI Components**  | âœ… Complete | Radix UI + Tailwind components   |
| **Type System**    | âœ… Complete | Branded types, Result pattern    |

### What You Build (Placeholders)

| Component        | Status         | Description                                    |
| ---------------- | -------------- | ---------------------------------------------- |
| **Use Cases**    | ğŸ“ Placeholder | `src/application/usecases/`                    |
| **Services**     | ğŸ“ Placeholder | `src/services/`, `src/server/services/`        |
| **Domain Types** | ğŸ“‹ Sample      | `src/core/types.ts` (replace with your domain) |
| **API Routes**   | ğŸ“‹ Sample      | `src/app/api/v1/sample/` (use as template)     |

### Technology Stack

| Layer                | Technology                   |
| -------------------- | ---------------------------- |
| **Framework**        | Next.js 16 (App Router)      |
| **Language**         | TypeScript 5.x (Strict Mode) |
| **Styling**          | Tailwind CSS 4               |
| **UI Components**    | Radix UI Primitives          |
| **Database**         | Supabase (PostgreSQL)        |
| **Authentication**   | Supabase Auth                |
| **State Management** | React Query + Context API    |
| **Validation**       | Zod                          |
| **Animations**       | Framer Motion                |

---

## System Architecture

### High-Level Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              COREX SYSTEM                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         PRESENTATION LAYER                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚   Web UI    â”‚  â”‚  REST API   â”‚  â”‚  Internal   â”‚  â”‚  Webhooks  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  (React)    â”‚  â”‚   (/v1/)    â”‚  â”‚   (/int/)   â”‚  â”‚            â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â”‚                â”‚                â”‚               â”‚             â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                      â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        APPLICATION LAYER                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Use Cases  â”‚  â”‚  Services   â”‚  â”‚  Contracts  â”‚  â”‚   Query    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚   (Zod)     â”‚  â”‚   Hooks    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â”‚                â”‚                â”‚               â”‚             â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                      â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                          DOMAIN LAYER                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Entities   â”‚  â”‚   Types     â”‚  â”‚   Events    â”‚  â”‚   Core     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚   Logic    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â–²                                      â”‚
â”‚                                      â”‚ (Depends on)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      INFRASTRUCTURE LAYER                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚     DAL     â”‚  â”‚   Server    â”‚  â”‚   Supabase  â”‚  â”‚   Redis    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   (Repos)   â”‚  â”‚  (Adapters) â”‚  â”‚   Client    â”‚  â”‚   Cache    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â”‚                â”‚                â”‚               â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                â”‚                â”‚               â”‚
             â–¼                â–¼                â–¼               â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Postgres â”‚     â”‚ External â”‚     â”‚ Supabase â”‚    â”‚  Upstash â”‚
      â”‚    DB    â”‚     â”‚   APIs   â”‚     â”‚   Auth   â”‚    â”‚  Redis   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **Note**: This is a **starter template**. The core types include sample domain entities
> (repositories, snapshots, rankings) as examples. Replace these with your actual domain model.

### Single-Bundle Architecture

CoreX follows a **Single-Bundle Architecture** - one Next.js application handles web UI, REST API, and background jobs:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           NEXT.JS BUNDLE                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     SERVER SIDE     â”‚  â”‚     CLIENT SIDE     â”‚  â”‚   EDGE RUNTIME â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ â€¢ API Routes        â”‚  â”‚ â€¢ React Components  â”‚  â”‚ â€¢ Middleware   â”‚  â”‚
â”‚  â”‚ â€¢ Server Components â”‚  â”‚ â€¢ Client Hooks      â”‚  â”‚ â€¢ Auth Check   â”‚  â”‚
â”‚  â”‚ â€¢ Server Actions    â”‚  â”‚ â€¢ State Management  â”‚  â”‚ â€¢ Rate Limit   â”‚  â”‚
â”‚  â”‚ â€¢ Job Workers       â”‚  â”‚ â€¢ Animations        â”‚  â”‚ â€¢ Headers      â”‚  â”‚
â”‚  â”‚ â€¢ Database Access   â”‚  â”‚ â€¢ Theme             â”‚  â”‚                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Design Philosophy

### 1. Zero-Trust Security

Every request is treated as potentially malicious:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REQUEST SECURITY PIPELINE                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Rate Limiting          â†’ Prevent abuse                          â”‚
â”‚ 2. Authentication         â†’ Verify identity                        â”‚
â”‚ 3. Authorization          â†’ Check permissions                      â”‚
â”‚ 4. Input Sanitization     â†’ Prevent injection                      â”‚
â”‚ 5. Schema Validation      â†’ Ensure data integrity                  â”‚
â”‚ 6. Business Logic         â†’ Execute operation                      â”‚
â”‚ 7. Response Sanitization  â†’ Prevent data leakage                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Single Source of Truth

- **Zod schemas** define both validation rules AND TypeScript types
- **Never** duplicate type definitions manually
- Types are **inferred** from schemas using `z.infer<>`

```typescript
// âœ… CORRECT: Single source of truth
const userSchema = z.object({
  id: z.string().uuid(),
  email: z.string().email(),
});
type User = z.infer<typeof userSchema>;

// âŒ WRONG: Duplicated definitions
interface User {
  id: string;
  email: string;
}
const userSchema = z.object({...}); // Can drift from interface
```

### 3. Fail-Closed Security

All security checks default to **deny**:

```typescript
// âœ… CORRECT: Fail closed
export async function getCurrentUser(): Promise<AuthContext | null> {
  try {
    const user = await supabase.auth.getUser();
    return user ? buildAuthContext(user) : null;
  } catch {
    return null; // Error = no access
  }
}

// âŒ WRONG: Fail open
export async function getCurrentUser() {
  try {
    return await supabase.auth.getUser();
  } catch {
    return { role: "user" }; // Error grants access!
  }
}
```

### 4. Graceful Degradation

The system remains functional even when components fail:

| Component Disabled | Behavior                           |
| ------------------ | ---------------------------------- |
| Auth               | Routes render, auth actions no-op  |
| Database           | DAL returns mock/empty data        |
| Permissions        | PermissionGate passes through      |
| Jobs               | `dispatch()` logs warning, returns |
| Redis              | Falls back to in-memory cache      |
| Rate Limiting      | All requests allowed               |

### 5. Explicit Over Implicit

- No magic strings - use constants and enums
- No implicit type coercion
- No implicit any types
- Explicit error handling with Result pattern

---

## Request Flow

### HTTP Request Lifecycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         HTTP REQUEST LIFECYCLE                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   Client Request
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   EDGE RUNTIME    â”‚    â† middleware.ts
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Auth Token  â”‚  â”‚    1. Refresh Supabase session
â”‚  â”‚  Refresh    â”‚  â”‚    2. Check protected routes
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚    3. Add security headers
â”‚  â”‚  Security   â”‚  â”‚    4. Generate request ID
â”‚  â”‚  Headers    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   RATE LIMITER    â”‚    â† server/rateLimit/
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Check     â”‚â”€â”€â”¼â”€â”€â†’ [429 Too Many Requests]
â”‚  â”‚   Quota     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ (Allowed)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AUTHENTICATION   â”‚    â† server/auth/
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Verify     â”‚â”€â”€â”¼â”€â”€â†’ [401 Unauthorized]
â”‚  â”‚  Identity   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ (Authenticated)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AUTHORIZATION    â”‚    â† server/auth/
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Check     â”‚â”€â”€â”¼â”€â”€â†’ [403 Forbidden]
â”‚  â”‚ Permissions â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ (Authorized)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  INPUT VALIDATION â”‚    â† contracts/, schemas/
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Sanitize   â”‚  â”‚    1. Strip dangerous chars
â”‚  â”‚  + Validate â”‚â”€â”€â”¼â”€â”€â†’ [400 Bad Request]
â”‚  â”‚   (Zod)     â”‚  â”‚    2. Validate against schema
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ (Valid)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BUSINESS LOGIC   â”‚    â† application/usecases/
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Execute    â”‚  â”‚
â”‚  â”‚  Use Case   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RESPONSE BUILDER  â”‚    â† server/http/
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Format +   â”‚  â”‚    1. Add security headers
â”‚  â”‚  Headers    â”‚  â”‚    2. Add cache headers
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    3. Add rate limit headers
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   Client Response
```

### Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AUTHENTICATION FLOWS                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   Entry Point   â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â–¼                     â–¼                     â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Email/Password â”‚   â”‚  OAuth (GitHub) â”‚   â”‚    API Key      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                     â”‚                     â”‚
            â–¼                     â–¼                     â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Supabase Auth   â”‚   â”‚ Supabase OAuth  â”‚   â”‚ Hash + Lookup   â”‚
   â”‚  signInWith     â”‚   â”‚  signInWith     â”‚   â”‚ in api_keys     â”‚
   â”‚  Password       â”‚   â”‚  OAuth          â”‚   â”‚ table           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                     â”‚                     â”‚
            â”‚                     â–¼                     â”‚
            â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
            â”‚            â”‚ OAuth Callback  â”‚            â”‚
            â”‚            â”‚ /auth/callback  â”‚            â”‚
            â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
            â”‚                     â”‚                     â”‚
            â”‚                     â–¼                     â”‚
            â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
            â”‚            â”‚ Create Profile  â”‚            â”‚
            â”‚            â”‚ (if new user)   â”‚            â”‚
            â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
            â”‚                     â”‚                     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  Session/Token  â”‚
                         â”‚   Established   â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  AuthContext    â”‚
                         â”‚  { userId,      â”‚
                         â”‚    role,        â”‚
                         â”‚    permissions }â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow

### Client-Server Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT-SERVER DATA FLOW                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                            CLIENT SIDE                                  â”‚
  â”‚                                                                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
  â”‚  â”‚   React     â”‚â”€â”€â”€â–¶â”‚ React Query â”‚â”€â”€â”€â–¶â”‚ API Client  â”‚                 â”‚
  â”‚  â”‚ Component   â”‚â—€â”€â”€â”€â”‚   Cache     â”‚â—€â”€â”€â”€â”‚ (lib/api)   â”‚                 â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â”‚
  â”‚                      staleTime: 5min          â”‚                         â”‚
  â”‚                      gcTime: 10min            â”‚                         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â”‚
                                            HTTP Request
                                            /api/v1/*
                                                  â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                           SERVER SIDE         â”‚                         â”‚
  â”‚                                               â–¼                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
  â”‚  â”‚    Route    â”‚â”€â”€â”€â–¶â”‚  Use Case   â”‚â”€â”€â”€â–¶â”‚    DAL      â”‚                 â”‚
  â”‚  â”‚   Handler   â”‚â—€â”€â”€â”€â”‚  (Service)  â”‚â—€â”€â”€â”€â”‚ (Repository)â”‚                 â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â”‚
  â”‚         â”‚                                     â”‚                         â”‚
  â”‚         â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚                         â”‚
  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Cache     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
  â”‚                     â”‚   (Redis)   â”‚                                     â”‚
  â”‚                     â”‚  TTL: 5min  â”‚                                     â”‚
  â”‚                     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
  â”‚                            â”‚                                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Supabase   â”‚
                        â”‚  PostgreSQL â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Job Queue Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          JOB QUEUE DATA FLOW                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Producer                           Queue                            Consumer
  â”€â”€â”€â”€â”€â”€â”€â”€                          â”€â”€â”€â”€â”€                            â”€â”€â”€â”€â”€â”€â”€â”€

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ API Handler â”‚                                                â”‚   Worker    â”‚
  â”‚    OR       â”‚                                                â”‚  Process    â”‚
  â”‚ Cron Job    â”‚                                                â”‚             â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                              â”‚
         â”‚ dispatch('job:name', payload)                                â”‚
         â”‚                                                              â”‚
         â–¼                                                              â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
  â”‚ Dispatcher  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚        JOBS TABLE       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚             â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    pop(queue)    â”‚
  â”‚ â€¢ Validate  â”‚         â”‚  â”‚ id: uuid          â”‚  â”‚                  â”‚
  â”‚ â€¢ Serialize â”‚         â”‚  â”‚ name: string      â”‚  â”‚                  â”‚
  â”‚ â€¢ Set delay â”‚         â”‚  â”‚ payload: jsonb    â”‚  â”‚                  â”‚
  â”‚ â€¢ Set queue â”‚         â”‚  â”‚ queue: string     â”‚  â”‚                  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚ priority: int     â”‚  â”‚                  â”‚
                          â”‚  â”‚ attempts: int     â”‚  â”‚                  â”‚
                          â”‚  â”‚ available_at: ts  â”‚  â”‚                  â”‚
                          â”‚  â”‚ reserved_at: ts   â”‚  â”‚                  â”‚
                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                  â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
                                                                       â”‚
                                                                       â–¼
                                                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                               â”‚  Registry   â”‚
                                                               â”‚  .get(name) â”‚
                                                               â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                                                      â”‚
                                                                      â–¼
                                                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                               â”‚   Handler   â”‚
                                                               â”‚  execute()  â”‚
                                                               â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                                                      â”‚
                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”
                                           â”‚                          â”‚      â”‚
                                           â–¼                          â–¼      â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   Success   â”‚           â”‚   Failure   â”‚
                                    â”‚  complete() â”‚           â”‚   retry()   â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   or fail() â”‚
                                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Architectural Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           PRESENTATION LAYER                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    Pages    â”‚ â”‚  Layouts    â”‚ â”‚ Components  â”‚ â”‚ Client Hooks    â”‚   â”‚
â”‚  â”‚ (app/*)     â”‚ â”‚ (layout.tsx)â”‚ â”‚ (components)â”‚ â”‚ (lib/hooks)     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          APPLICATION LAYER                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Use Cases  â”‚ â”‚  Services   â”‚ â”‚  Contracts  â”‚ â”‚ Query Hooks     â”‚   â”‚
â”‚  â”‚(application)â”‚ â”‚ (services)  â”‚ â”‚ (contracts) â”‚ â”‚ (lib/query)     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           DOMAIN LAYER                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Entities  â”‚ â”‚    Types    â”‚ â”‚   Events    â”‚ â”‚  Core Logic     â”‚   â”‚
â”‚  â”‚  (types/)   â”‚ â”‚  (types/)   â”‚ â”‚ (types/)    â”‚ â”‚   (core/)       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        INFRASTRUCTURE LAYER                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     DAL     â”‚ â”‚   Server    â”‚ â”‚   Supabase  â”‚ â”‚   External      â”‚   â”‚
â”‚  â”‚   (dal/)    â”‚ â”‚  (server/)  â”‚ â”‚(lib/supabaseâ”‚ â”‚   APIs          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Layer Responsibilities

| Layer              | Responsibility                             | Dependencies        |
| ------------------ | ------------------------------------------ | ------------------- |
| **Presentation**   | UI rendering, user interaction             | Application, Domain |
| **Application**    | Use case orchestration, business workflows | Domain              |
| **Domain**         | Business entities, rules, events           | None (Pure)         |
| **Infrastructure** | External services, databases, APIs         | Domain              |

### Key Principle: Dependency Inversion

Dependencies flow **inward** - outer layers depend on inner layers, never the reverse:

```
Presentation â†’ Application â†’ Domain â† Infrastructure
```

The Domain layer has **zero** external dependencies.

---

## Module Dependency Graph

```
src/types/ (Pure TypeScript - NO external deps)
    â”‚
    â”œâ”€â”€â”€ src/core/ (Domain logic)
    â”‚
    â”œâ”€â”€â”€ src/contracts/ (Zod schemas)
    â”‚        â”‚
    â”‚        â””â”€â”€â”€ src/schemas/ (API schemas)
    â”‚
    â”œâ”€â”€â”€ src/lib/
    â”‚        â”œâ”€â”€â”€ env.ts (Zod â†’ Environment)
    â”‚        â”œâ”€â”€â”€ utils.ts (clsx, tailwind-merge)
    â”‚        â”œâ”€â”€â”€ logger.ts (env â†’ Logger)
    â”‚        â”œâ”€â”€â”€ hooks.ts (React only)
    â”‚        â”œâ”€â”€â”€ animations.ts (Framer Motion)
    â”‚        â”‚
    â”‚        â”œâ”€â”€â”€ config/ (Feature flags)
    â”‚        â”œâ”€â”€â”€ di/ (DI Container)
    â”‚        â”œâ”€â”€â”€ plugins/ (Plugin system)
    â”‚        â”œâ”€â”€â”€ supabase/ (Supabase clients)
    â”‚        â”œâ”€â”€â”€ query/ (React Query)
    â”‚        â””â”€â”€â”€ api/ (API client)
    â”‚
    â”œâ”€â”€â”€ src/dal/ (Data Access Layer)
    â”‚        â””â”€â”€â”€ depends on: lib/supabase, types
    â”‚
    â”œâ”€â”€â”€ src/server/
    â”‚        â”œâ”€â”€â”€ auth/ (Authentication)
    â”‚        â”œâ”€â”€â”€ http/ (Response helpers)
    â”‚        â”œâ”€â”€â”€ cache/ (Caching layer)
    â”‚        â”œâ”€â”€â”€ rateLimit/ (Rate limiting)
    â”‚        â”œâ”€â”€â”€ security/ (Security utils)
    â”‚        â”œâ”€â”€â”€ jobs/ (Job queue)
    â”‚        â””â”€â”€â”€ services/ (Server services)
    â”‚
    â”œâ”€â”€â”€ src/services/ (Isomorphic services)
    â”‚
    â”œâ”€â”€â”€ src/application/ (Use cases)
    â”‚        â””â”€â”€â”€ depends on: dal, server, services
    â”‚
    â””â”€â”€â”€ src/components/ (React components)
             â””â”€â”€â”€ depends on: lib, types
```

---

## Feature Flag System

All features are **disabled by default** for a clean starter experience:

```typescript
// src/lib/config/features.ts
export const features = {
  auth: process.env.NEXT_PUBLIC_ENABLE_AUTH === "1",
  database: process.env.NEXT_PUBLIC_ENABLE_DATABASE === "1",
  permissions: process.env.NEXT_PUBLIC_ENABLE_PERMISSIONS === "1",
  jobs: process.env.NEXT_PUBLIC_ENABLE_JOBS === "1",
};
```

### Environment Variables

| Variable                         | Default | Purpose                    |
| -------------------------------- | ------- | -------------------------- |
| `NEXT_PUBLIC_ENABLE_AUTH`        | `0`     | Enable Supabase Auth       |
| `NEXT_PUBLIC_ENABLE_DATABASE`    | `0`     | Enable database operations |
| `NEXT_PUBLIC_ENABLE_PERMISSIONS` | `0`     | Enable permission checks   |
| `NEXT_PUBLIC_ENABLE_JOBS`        | `0`     | Enable job queue system    |
| `ENABLE_RATE_LIMIT`              | `0`     | Enable rate limiting       |
| `ENABLE_RESPONSE_CACHE`          | `0`     | Enable response caching    |
| `ENABLE_REDIS`                   | `0`     | Enable Redis/Upstash       |

### Feature Dependencies

```
ENABLE_PERMISSIONS
    â””â”€â”€â”€ requires: ENABLE_AUTH + ENABLE_DATABASE

ENABLE_JOBS (database driver)
    â””â”€â”€â”€ requires: ENABLE_DATABASE

ENABLE_RESPONSE_CACHE (Redis)
    â””â”€â”€â”€ requires: ENABLE_REDIS
```

---

## Directory Structure

```
src/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ (auth)/            # Auth pages (login, signup, etc.)
â”‚   â”œâ”€â”€ (main)/            # Public pages
â”‚   â”œâ”€â”€ (private)/         # Protected pages (dashboard)
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ internal/      # Internal APIs (cron, admin)
â”‚   â”‚   â””â”€â”€ v1/            # Public API v1
â”‚   â””â”€â”€ auth/              # Auth callbacks
â”‚
â”œâ”€â”€ application/           # Use cases (business workflows)
â”‚   â”œâ”€â”€ index.ts          # Public exports
â”‚   â””â”€â”€ usecases/         # Individual use cases
â”‚
â”œâ”€â”€ components/            # React components
â”‚   â”œâ”€â”€ auth/             # Auth components (PermissionGate)
â”‚   â”œâ”€â”€ layout/           # Layout components (Header, Footer)
â”‚   â”œâ”€â”€ providers/        # Context providers
â”‚   â””â”€â”€ ui/               # UI primitives (Button, Card, etc.)
â”‚
â”œâ”€â”€ contexts/             # React contexts
â”‚   â””â”€â”€ AppContext.tsx    # Global app settings
â”‚
â”œâ”€â”€ contracts/            # Data contracts (Zod schemas)
â”‚   â”œâ”€â”€ common.ts         # Reusable validators
â”‚   â”œâ”€â”€ errors.ts         # Error schemas
â”‚   â””â”€â”€ *.contract.ts     # Domain contracts
â”‚
â”œâ”€â”€ core/                 # Pure domain types
â”‚   â””â”€â”€ types.ts          # Business entities
â”‚
â”œâ”€â”€ dal/                  # Data Access Layer
â”‚   â”œâ”€â”€ db.ts             # Database client
â”‚   â””â”€â”€ *.repo.ts         # Repository classes
â”‚
â”œâ”€â”€ lib/                  # Shared utilities
â”‚   â”œâ”€â”€ api/              # API client
â”‚   â”œâ”€â”€ auth/             # Auth utilities
â”‚   â”œâ”€â”€ config/           # Configuration
â”‚   â”œâ”€â”€ di/               # Dependency injection
â”‚   â”œâ”€â”€ plugins/          # Plugin system
â”‚   â”œâ”€â”€ query/            # React Query
â”‚   â””â”€â”€ supabase/         # Supabase clients
â”‚
â”œâ”€â”€ schemas/              # API request/response schemas
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ internal/     # Internal API schemas
â”‚       â””â”€â”€ v1/           # Public API schemas
â”‚
â”œâ”€â”€ server/               # Server-only code
â”‚   â”œâ”€â”€ auth/             # Authentication
â”‚   â”œâ”€â”€ cache/            # Caching
â”‚   â”œâ”€â”€ http/             # HTTP utilities
â”‚   â”œâ”€â”€ jobs/             # Job queue
â”‚   â”œâ”€â”€ rateLimit/        # Rate limiting
â”‚   â”œâ”€â”€ security/         # Security utilities
â”‚   â””â”€â”€ services/         # Server services
â”‚
â”œâ”€â”€ services/             # Isomorphic services
â”‚
â”œâ”€â”€ types/                # Type definitions
â”‚   â”œâ”€â”€ base.ts           # Primitives, branded types
â”‚   â”œâ”€â”€ entities.ts       # Domain entities
â”‚   â”œâ”€â”€ errors.ts         # Error types
â”‚   â”œâ”€â”€ events.ts         # Event types
â”‚   â”œâ”€â”€ http.ts           # HTTP types
â”‚   â”œâ”€â”€ plugins.ts        # Plugin types
â”‚   â””â”€â”€ services.ts       # Service interfaces
â”‚
â””â”€â”€ middleware.ts         # Next.js middleware

supabase/
â””â”€â”€ migrations/           # Database migrations

docs/                     # Documentation
```

---

## Design Patterns

### 1. Repository Pattern (DAL)

Centralizes data access logic:

```typescript
// src/dal/jobs.repo.ts
export class JobsRepository {
  static async push(queue: QueueName, data: JobData): Promise<JobId | null> {
    const client = await getClient();
    const { data: result } = await client.from('jobs').insert({...});
    return result?.id as JobId;
  }

  static async pop(queue: QueueName): Promise<Job | null> {
    // Atomic reservation with distributed locking
  }
}
```

### 2. Result Pattern (Error Handling)

Explicit success/failure handling:

```typescript
// src/types/errors.ts
type Result<T, E = Error> =
  | { success: true; data: T }
  | { success: false; error: E };

// Usage
function divide(a: number, b: number): Result<number, string> {
  if (b === 0) return { success: false, error: "Division by zero" };
  return { success: true, data: a / b };
}
```

### 3. Branded Types (Type Safety)

Compile-time type distinction with zero runtime cost:

```typescript
// src/types/base.ts
type Brand<T, TBrand extends string> = T & { readonly [__brand]: TBrand };

type UserId = Brand<string, "UserId">;
type SessionId = Brand<string, "SessionId">;

// Prevents mixing up IDs at compile time
function getUser(id: UserId): User {}
const sessionId: SessionId = "abc" as SessionId;
getUser(sessionId); // âŒ Compile error!
```

### 4. Dependency Injection

Loose coupling through interfaces:

```typescript
// src/lib/di/container.ts
const container = new ServiceContainerImpl();

container.registerSingleton("logger", () => new ConsoleLogger());
container.registerScoped(
  "userService",
  (c) => new UserService(c.get("logger")),
);

// Usage
const userService = container.get<UserService>("userService");
```

### 5. Plugin Architecture

Extensibility through plugins:

```typescript
// Plugin definition
const myPlugin: PluginDefinition = {
  metadata: {
    id: "my-plugin",
    name: "My Plugin",
    version: "1.0.0",
  },
  capabilities: ["api:extend"],
  async activate(ctx) {
    ctx.logger.info("Plugin activated");
  },
  async deactivate(ctx) {
    ctx.logger.info("Plugin deactivated");
  },
};
```

### 6. Middleware Pipeline

Composable request processing:

```typescript
// Job middleware example
const withTimeout =
  (ms: number): JobMiddleware =>
  async (ctx, next) => {
    const controller = new AbortController();
    const timeout = setTimeout(() => controller.abort(), ms);
    try {
      return await next();
    } finally {
      clearTimeout(timeout);
    }
  };
```

---

## DO's and DON'Ts

### âœ… DO

1. **Use feature flags** for optional functionality
2. **Infer types** from Zod schemas
3. **Use branded types** for IDs and domain values
4. **Handle errors explicitly** with Result pattern
5. **Add `"server-only"`** to server modules
6. **Use the DI container** for service dependencies
7. **Document public APIs** with JSDoc comments
8. **Write idempotent migrations**
9. **Centralize queries** in repository classes
10. **Validate all external input** with Zod

### âŒ DON'T

1. **Don't import server code** in client components
2. **Don't duplicate type definitions** - use inference
3. **Don't use magic strings** - use constants/enums
4. **Don't throw for expected errors** - use Result
5. **Don't access env vars directly** - use `lib/env.ts`
6. **Don't bypass the DAL** for database access
7. **Don't skip validation** on API inputs
8. **Don't use `any` type** - use `unknown` and narrow
9. **Don't store secrets** in client-accessible code
10. **Don't ignore TypeScript errors** - fix them

---

## Related Documentation

- [MEMORY.md](./MEMORY.md) - Memory management guide
- [AUTH.md](./AUTH.md) - Authentication & authorization
- [ROUTING.md](./ROUTING.md) - API routing & contracts
- [COMPONENTS.md](./COMPONENTS.md) - UI component system
- [SERVICES.md](./SERVICES.md) - Services & DI
- [CACHING.md](./CACHING.md) - Caching strategies
- [JOB_QUEUE.md](./JOB_QUEUE.md) - Background job system
- [BEST_PRACTICES.md](./BEST_PRACTICES.md) - Coding standards
